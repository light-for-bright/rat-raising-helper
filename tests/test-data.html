<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Тест данных - Крысиные бега</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-4">
        <h1>Тест сохранения/загрузки данных</h1>
        
        <div class="row">
            <div class="col-md-6">
                <h3>Тестовые поля</h3>
                <div class="mb-3">
                    <label for="profession" class="form-label">Профессия:</label>
                    <input type="text" class="form-control" id="profession" placeholder="Введите профессию">
                </div>
                <div class="mb-3">
                    <label for="salary" class="form-label">Зарплата:</label>
                    <input type="number" class="form-control" id="salary" placeholder="0">
                </div>
                <div class="mb-3">
                    <label for="savings" class="form-label">Сбережения:</label>
                    <input type="number" class="form-control" id="savings" placeholder="0">
                </div>
            </div>
            
            <div class="col-md-6">
                <h3>Действия</h3>
                <button type="button" class="btn btn-primary mb-2" onclick="testSave()">Сохранить данные</button>
                <button type="button" class="btn btn-success mb-2" onclick="testLoad()">Загрузить данные</button>
                <button type="button" class="btn btn-warning mb-2" onclick="testReset()">Сбросить игру</button>
                <button type="button" class="btn btn-info mb-2" onclick="showGameState()">Показать состояние</button>
            </div>
        </div>
        
        <div class="mt-4">
            <h3>Консоль</h3>
            <div id="console" class="bg-light p-3" style="height: 200px; overflow-y: auto; font-family: monospace;">
                <div>Откройте консоль браузера (F12) для просмотра логов...</div>
            </div>
        </div>
    </div>

    <script src="js/game-data.js"></script>
    <script>
        // Тестовые функции
        function testSave() {
            // Обновляем состояние из полей
            gameState.profession = document.getElementById('profession').value;
            gameState.income.salary = parseFloat(document.getElementById('salary').value) || 0;
            gameState.assets.savings = parseFloat(document.getElementById('savings').value) || 0;
            
            saveGame();
            addToConsole('Данные сохранены в LocalStorage');
        }
        
        function testLoad() {
            const loaded = loadGame();
            if (loaded) {
                // Обновляем поля из состояния
                document.getElementById('profession').value = gameState.profession;
                document.getElementById('salary').value = gameState.income.salary;
                document.getElementById('savings').value = gameState.assets.savings;
                addToConsole('Данные загружены из LocalStorage');
            } else {
                addToConsole('Сохраненные данные не найдены');
            }
        }
        
        function testReset() {
            resetGame();
            // Очищаем поля
            document.getElementById('profession').value = '';
            document.getElementById('salary').value = '';
            document.getElementById('savings').value = '';
            addToConsole('Игра сброшена к начальному состоянию');
        }
        
        function showGameState() {
            addToConsole('Текущее состояние игры:');
            addToConsole(JSON.stringify(gameState, null, 2));
        }
        
        function addToConsole(message) {
            const console = document.getElementById('console');
            const div = document.createElement('div');
            div.textContent = new Date().toLocaleTimeString() + ': ' + message;
            console.appendChild(div);
            console.scrollTop = console.scrollHeight;
        }
        
        // Инициализация
        document.addEventListener('DOMContentLoaded', function() {
            addToConsole('Тестовая страница загружена');
            loadGame();
        });
    </script>
</body>
</html>
