# Техническое видение проекта "Крысиные бега"

## 1. Технологии

**Фронтенд:**
- HTML + CSS + Vanilla JavaScript (без фреймворков)
- Bootstrap для быстрого UI
- LocalStorage для сохранения данных

**Бэкенд:**
- Отсутствует (клиентское приложение)

**Деплой:**
- Статический хостинг (GitHub Pages, Netlify, Vercel)

**Преимущества такого подхода:**
- Минимум зависимостей
- Быстрый старт разработки
- Простое развертывание
- Легко модифицировать и тестировать

## 2. Принцип разработки

**Основные принципы:**
1. **MVP-подход** - только необходимый функционал для проверки идеи
2. **Поэтапная разработка** - сначала 1 этап (Отчет о доходах), затем остальные
3. **Простота превыше всего** - никаких сложных паттернов, только прямолинейный код
4. **Быстрые итерации** - работающий прототип за 1-2 дня
5. **Клиентская логика** - вся бизнес-логика в JavaScript на клиенте

**Методология:**
- Разработка по принципу "сделал → протестировал → зафиксировал"
- Один файл = одна функция (HTML, CSS, JS в отдельных файлах)
- Минимум абстракций, максимум читаемости
- Приоритет на работоспособность, а не на "красивый код"

**Порядок разработки:**
1. Создать базовую HTML-структуру с тремя вкладками
2. Реализовать логику 1 этапа (Отчет о доходах)
3. Добавить автоматические расчеты
4. Реализовать сохранение в LocalStorage
5. Добавить остальные вкладки

## 3. Структура проекта

```
rat_raising_helper/
├── index.html              # Главная страница с тремя вкладками
├── css/
│   └── style.css           # Все стили приложения
├── js/
│   ├── app.js              # Основная логика приложения
│   ├── game-data.js        # Модель данных игры
│   └── calculations.js     # Функции расчетов
├── assets/
│   └── (иконки, если понадобятся)
└── README.md               # Инструкция по запуску
```

**Обоснование структуры:**
- Минимум файлов для простоты навигации
- Логическое разделение: HTML, CSS, JS
- Отдельный файл для данных и расчетов для читаемости
- Никаких сложных папок и вложений

**Принципы организации:**
- Один HTML-файл для всего приложения
- CSS в одном файле (можно разделить позже при необходимости)
- JavaScript разбит по функциональности, но без излишней детализации

## 4. Архитектура проекта

**Компоненты системы:**

1. **HTML-слой** (`index.html`)
   - Три вкладки (табы)
   - Формы для ввода данных
   - Таблицы для отображения информации
   - Кнопки управления

2. **Слой данных** (`game-data.js`)
   - Объект состояния игры
   - Функции сохранения/загрузки из LocalStorage
   - Валидация данных

3. **Слой логики** (`app.js`)
   - Обработчики событий
   - Управление вкладками
   - Координация между компонентами

4. **Слой расчетов** (`calculations.js`)
   - Функции автоматических расчетов
   - Проверка условий перехода между этапами
   - Математические операции

**Взаимодействие компонентов:**
```
HTML → app.js → game-data.js
  ↓       ↓         ↓
calculations.js ← calculations.js
```

**Принципы архитектуры:**
- Прямолинейные связи между компонентами
- Минимум абстракций
- Каждый файл отвечает за свою область
- Простая передача данных через функции

## 5. Модель данных

```javascript
const gameState = {
  // Информационные поля
  profession: "",
  dream: "",
  auditor: "",
  
  // Доходы
  income: {
    salary: 0,
    realEstateBusiness: []
  },
  
  // Расходы
  expenses: {
    taxes: 0,
    houseMortgage: 0,
    educationLoan: 0,
    carLoan: 0,
    creditCards: 0,
    otherExpenses: 0,
    bankLoan: 0,
    childrenExpenses: 0
  },
  
  // Активы
  assets: {
    savings: 0,
    preciousMetals: 0,
    stocks: [], // [{name, quantity, price}]
    realEstateBusiness: [] // [{name, downPayment, price}]
  },
  
  // Пассивы
  liabilities: {
    houseMortgage: 0,
    educationLoan: 0,
    carLoan: 0,
    creditCards: 0,
    bankLoan: 0,
    realEstateBusiness: [] // [{name, mortgage}]
  },
  
  // Бланк учета денежных средств
  cashFlow: {
    initialBalance: 0,
    transactions: [] // [{date, description, amount, type}]
  },
  
  // 2 этап
  stage2: {
    passiveIncomeAtTransition: 0,
    targetAmount: 0,
    businesses: [] // [{name, monthlyCashFlow, income}]
  },
  
  // Состояние игры
  currentStage: 1,
  stage2Unlocked: false
}
```

**Принципы модели данных:**
- Плоская структура без глубокой вложенности
- Простые типы данных (числа, строки, массивы)
- Минимум валидации на уровне данных
- Легко сериализуется в JSON для LocalStorage

## 6. Сценарии работы

**Сценарий 1: Начало новой игры**
1. Пользователь открывает приложение
2. Заполняет информационные поля (профессия, мечта, аудитор)
3. Вводит начальные данные (зарплата, налоги, пассивы, сбережения)
4. Система автоматически рассчитывает месячный денежный поток
5. Данные сохраняются в LocalStorage

**Сценарий 2: Игра в процессе (1 этап)**
1. Пользователь добавляет/изменяет доходы (недвижимость/бизнес)
2. Покупает акции, недвижимость
3. Берет банковские кредиты
4. Система пересчитывает все автоматические поля
5. Проверяет условие перехода на 2 этап

**Сценарий 3: Переход на 2 этап**
1. Система проверяет: все пассивы = 0 И пассивный доход > общие расходы
2. Разблокирует вкладку "Скоростная дорожка"
3. Рассчитывает целевые суммы для победы
4. Пользователь может добавлять бизнесы

**Сценарий 4: Учет денежных средств**
1. Пользователь записывает все приходы/расходы
2. Система автоматически добавляет новые строки
3. Ведет учет баланса

**Сценарий 5: Победа**
1. Достижение целевой суммы на 2 этапе
2. Показ сообщения о победе

## 7. Деплой

**Варианты деплоя:**

1. **GitHub Pages** (рекомендуемый)
   - Создать репозиторий на GitHub
   - Загрузить файлы в ветку main
   - Включить GitHub Pages в настройках
   - Приложение доступно по ссылке `username.github.io/rat_raising_helper`

2. **Netlify** (альтернативный)
   - Перетащить папку с файлами в Netlify
   - Получить готовую ссылку
   - Автоматическое обновление при загрузке новых файлов

3. **Vercel** (альтернативный)
   - Подключить GitHub репозиторий
   - Автоматический деплой при коммитах

**Преимущества такого подхода:**
- Бесплатно
- Простота развертывания (1-2 клика)
- Автоматическое обновление
- Готовые HTTPS-ссылки
- Не требует настройки сервера

**Процесс деплоя:**
1. Разработать приложение локально
2. Протестировать функциональность
3. Загрузить на выбранную платформу
4. Получить ссылку для тестирования

## 8. Подход к конфигурированию

**Конфигурация приложения:**

1. **Константы игры** (в `game-data.js`)
   ```javascript
   const GAME_CONFIG = {
     BANK_LOAN_RATE: 0.10,        // 10% от суммы кредита
     STAGE2_MULTIPLIER: 100,      // Пассивный доход × 100
     STAGE2_BONUS: 50000,         // +50,000 к целевой сумме
     STORAGE_KEY: 'rat_race_game' // Ключ для LocalStorage
   }
   ```

2. **Настройки UI** (в `style.css` или отдельном объекте)
   ```javascript
   const UI_CONFIG = {
     CURRENCY_SYMBOL: '₽',
     DATE_FORMAT: 'DD.MM.YYYY',
     DECIMAL_PLACES: 0
   }
   ```

**Принципы конфигурирования:**
- Все настройки в коде (никаких внешних конфигов)
- Простые константы в начале файлов
- Минимум настроек (только необходимые)
- Легко изменяемые значения для тестирования

**Что НЕ конфигурируется:**
- Пути к файлам (все статично)
- Сложные настройки поведения
- Пользовательские предпочтения (пока не нужны)

## 9. Подход к логгированию

**Система логирования:**

1. **Консольное логирование** (только для разработки)
   ```javascript
   const DEBUG = true; // Переключатель для продакшена
   
   function log(message, data = null) {
     if (DEBUG) {
       console.log(`[Rat Race] ${message}`, data);
     }
   }
   ```

2. **Логируемые события:**
   - Сохранение/загрузка данных
   - Переходы между этапами
   - Критические ошибки расчетов
   - Достижение условий победы

3. **Обработка ошибок:**
   ```javascript
   function handleError(error, context) {
     if (DEBUG) {
       console.error(`[Rat Race Error] ${context}:`, error);
     }
     // Простое уведомление пользователю
     alert(`Произошла ошибка: ${context}`);
   }
   ```

**Принципы логирования:**
- Только в консоль браузера (никаких внешних сервисов)
- Минимум логов (только важные события)
- Простые сообщения на русском языке
- Легко отключается для продакшена

**Что НЕ логируется:**
- Каждое изменение поля
- Пользовательские действия
- Детальная отладочная информация

---

## Заключение

Данное техническое видение создано в соответствии с принципом KISS (Keep It Simple, Stupid) и направлено на максимально быстрое создание рабочего прототипа для проверки идеи игры "Крысиные бега". 

Все решения приняты с учетом необходимости:
- Быстрого старта разработки
- Простоты поддержки и модификации
- Легкого развертывания
- Минимальных затрат на инфраструктуру

Документ служит техническим заданием для последующей разработки приложения.
